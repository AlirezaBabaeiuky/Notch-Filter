# Notch-Filter
In this repository, Band-Stop (Notch) filter and some internal dynamics of second-order systems are studied. 
In mechatronics systems, Excitatoin point and Measurement points are of major interest. If the measurement point coincides with the excitation point (injection), this is called: Collocated measurement, otherwise this is Non-collocated measurement. Main difference is in terms of Linear System Stability. From Classical controls engineering, it is understood that for a stable system, the manitude should be below 0 dB and phase should be greater than '-180' degrees. Certaintly, the closer to these points the less stability margins we have. 
This is inferred from the fact that Frequency Response of a system is essentially a Complex number and the closed-loop response is like: TF_CL = (G_plant * G_Controller) / (1+ G_plant * G_controller); such a transfer function has denominator as Charateristics equation which determines the stability of the response. Physicall interpretation is: a system is unstale if the response blows up (diverges unboundedly). 
Recap: Frequency Response jolds valid only for Linear and Steady-State responses. 
![image](https://github.com/user-attachments/assets/225c8627-00eb-4d5c-80b2-bb35b9a1e6e5)
Above figure shows the Bode plot (Frequency Response / FR) of 2DOF (2-Degree-of-Freedom) system: Red line: is a Non-collocated measurement where: f1 --> u2; while blue line represents the collocated measurement as: f1 --> u1. Major difference is: 1- in Collocated measurement, Anti-resonance is observed while this is not captured in Non-collocated transfer measurements in linear system frequency responses. 2- Collocated measurement (red line) shows better stability as the phase is always restricted between '0' and '-180'; while in th enon-collocated measurement as there is no anti-resonance the phase drops down till '-360' degrees which is a SERIOUS concern in terms of stability. 
One common appraoch used widely in industries is using a filter to do: Loop-Shaping to secure stability. This is also called filtering where by implementing filter transfer function in the contorl architecture, internal dynamics (e.g., Natural Resonances) are suppressed and controlled to prevent INSTABILITY ISSUES. There are multiple transfer functions representing a band-stop (Notch) filter; one common is: 
![image](https://github.com/user-attachments/assets/fceae0e4-042b-45e4-b620-d9a1e7451b2c)
where a simple transfer function is: Two second-order systems dividd by each other. In this case, the numerator damping (zero damping) is the factor to adjust the Depth of the Notch (how deep we surress the signal; smaller values of zero-damping yield deeper suppression/attenuation), and the denominator damping ratio or pole damping determines the Width of the notch (meaning how wide/narrow the signal attenuation will be; where, greater values of pole damping yield wider signal attenuation). Side note: if the Cutt-off frequency of numerator (zero cuttoff frequency) is not equal to the cutoff frequency of the denominator; this is called: Skew-notch filter (the corresponding trans frunction in Bode will by Assymetric). Moreover, if the the zero damping is GREATER than the pole damping, then this is: Band-Pass filter where the signal is Amplified and intensified instead of attenuation (signal attenuation is feasible if zero damping is smaller than the pole damping).    
![image](https://github.com/user-attachments/assets/8aa71d53-0230-46e5-87d3-c40f48213cff)
Above figure shows the bod eplot (FR) of a dobule-Notch filter. Obviously, where the signal attenaution / suppression takes place, the corresponding phase is BOOSTED for '+90' degrees. This means that a Notch or Band-Stop filter acts simiar to a Lead compensator, as it provides +90 degrees of phase. Such a boost in th ephase is critical in supporting the stability of the system. Phase shifts (usually happening as phase lag) is crucially important in frequency analysis and frequency response of linear systems; as phase lags (happening gradully in signals of control systems due to: filtering or ...) results in Instability issues. Such an inssue is coming from the point that: as long as the gain / magnitude of the system response is above 0 dB (which is the desired case for widening the bandwidth = up to which frequency the controller can rapidly chase and track changes in the input / excitation / injection signal), and the corresponding phase is greater than '-180' degrees; system is still stable though my be Not Robust (it can easily become unstable due to uncertainty and disturbances). So, having great values of gain (magnitude) is desired from bandwidth viewpoint but can lead to unstable system if the corresponding phase is smaller than '-180' degrees. Good news is: usually phase lags leading to phase drops below '-180' degrees occur at Higher Freuqneices where the bandwidth is not important. In other words, up to the bandwidth crossover frequency, the phase drop should expectedly be minimum in a way that it does not jeoparadise stability. But, what to do if this not the case? Notch filter! Implementing notch filter can secure stability by adding phases to the system even at higher frequencies. Another reason for the phase to drop is: Internal Dynamics like: natural frequencies of the system. Comparing stronger notch versus a mild one in the figure above, it is obvious that the sharper notch secures more phase boost, however both filters start from '0' degrees and end in '0' degrees again as they are active for a short bandwidth only.         
![image](https://github.com/user-attachments/assets/24f4e25c-b0a8-48f0-8341-f27b6bef5215)
Above figure shows the notch filter influence on both collocated and non-collocated transfers. 
![image](https://github.com/user-attachments/assets/844e4a70-476e-4d0f-979b-c41908a175da)
Above figure, shows the major affect of the notch filter on securing stability when using a controller. Pay careful attention to the natural frequency region, where the main system with controller becomes easily unstable as the peak at the wn (natural frequency) corresponds to the phase around '-180' degrees or even below that. But this problem is resolved via notch filter. Meaning that with a Notch filter, we can secure both: having a wide bandwidth and having a stable and robust system to handle uncertainties and internal dynamics. 
Warning: This is crucially vital not to use Notch filters for suppressing ANY External Disturbances. As doing so only makes the controller BLIND. 



